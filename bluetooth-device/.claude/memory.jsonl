{"ts":"2026-01-30T00:00:00Z","type":"context","content":"Smart Audio Bridge project: Raspberry Pi Zero 2W acts as BT HFP headset to smartphone, records both sides of calls + ambient audio via dual mics, syncs to workstation for AI transcription","tags":["project-overview","audio-bridge"]}
{"ts":"2026-01-30T00:00:00Z","type":"context","content":"Two source docs exist: device-prd.md (markdown PRD + technical architecture) and background.rtfd (RTF conversation with design discussion, risks, hardware recommendations)","tags":["source-docs"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Target platform: Pi Zero 2W only (no local transcription, offload to workstation). Wired earpiece for v1.0, BT headset as documented future enhancement","tags":["architecture","hardware"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Continuous recording: always recording when powered on. Local mic (omni) always, BT call audio when available. Stereo WAV with L=local mic, R=BT call (silence when idle)","tags":["recording","architecture"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Dual mic setup: cardioid lav for calls (USB adapter #1 with earpiece out), omnidirectional for ambient (USB adapter #2). Two separate USB adapters via hub","tags":["hardware","microphones"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Smart chunking: split on silence/no-speech detection (VAD preferred, energy-threshold fallback) with configurable max file size. No audio gaps at boundaries","tags":["recording","chunking"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Sync: rsync over SSH to multiple configurable targets. Retention policy with capacity influence (synced file age, unsynced file age, storage % threshold)","tags":["sync","storage"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Configuration: web UI for v1.0 (config only, no auth). Companion mobile app is primary config method, also provides GPS location data to Pi","tags":["config","companion-app"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Companion app sends GPS via BT SPP/BLE (preferred) or local Wi-Fi fallback. Also serves as device configuration interface, replacing web UI as primary method for most users","tags":["companion-app","gps","config"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Rich metadata: sidecar JSON per recording chunk with timestamps, call segments (phone number, direction), GPS samples, device state. Synced alongside WAV files","tags":["metadata"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Workstation post-processing pipeline: Whisper transcription, speaker diarization, calendar matching, contact lookup. Modular and idempotent. Produces enriched JSON output","tags":["post-processing","workstation"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Monitoring: GPIO LED + log files + /status JSON endpoint. Graceful shutdown on low battery (close file, attempt sync, shutdown)","tags":["monitoring","power"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Power efficiency in spec: efficient PipeWire buffers, batch sync, Wi-Fi power management when not syncing, CPU governor favoring power-save","tags":["power"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"Default sample rate 44.1kHz, configurable (16k, 44.1k, 48k minimum options)","tags":["recording","audio"]}
{"ts":"2026-01-30T00:00:00Z","type":"decision","content":"No auth on web UI for v1.0 (trusted local network). Security improvements deferred to future version","tags":["security"]}
{"ts":"2026-01-30T00:00:00Z","type":"todo","status":"open","content":"User is reviewing PRD (tasks/0001-prd-smart-audio-bridge.md) and will provide inline feedback","tags":["prd","next-steps"]}
{"ts":"2026-01-30T00:00:00Z","type":"todo","status":"open","content":"Resolve open questions in PRD, especially OQ-4 (oFono+BlueZ HFP reliability - highest technical risk) and OQ-5 (companion app BT protocol vs Wi-Fi)","tags":["prd","open-questions"]}
{"ts":"2026-01-30T00:00:00Z","type":"todo","status":"open","content":"After PRD is finalized, generate task breakdown for implementation","tags":["planning","next-steps"]}
